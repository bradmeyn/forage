@using Forage.ViewModels 
@model LoginViewModel 
@{ ViewData["Title"] = "Sign up";}

<div class="container">
  <partial name="_Alerts" />

  <div
    class="mx-auto bg-white shadow-sm p-4 position-relative rounded mt-4"
    style="max-width: 500px"
  >
    <h3 class="mb-3 fs-2 text-center">Forage Login</h3>
    <p class="text-muted text-center mb-4">
      Please enter your credentials to login.
    </p>
    <form
      asp-action="Login"
      asp-controller="Account"
      method="post"
      class="needs-validation"
      novalidate
    >
    @Html.AntiForgeryToken()
      <div asp-validation-summary="ModelOnly" class="text-danger"></div>
      <div class="form-group mb-3">
        <label
          asp-for="EmailAddress"
          class="control-label small text-muted"
        ></label>
        <input
          asp-for="EmailAddress"
          class="form-control"
          type="email"
          required
        />
        <span
          asp-validation-for="EmailAddress"
          class="text-danger small"
        ></span>
        <span class="invalid-feedback">Please enter a valid email</span>
      </div>
      <div class="form-group mb-3">
        <label
          asp-for="Password"
          class="control-label small text-muted"
        ></label>
        <input asp-for="Password" class="form-control" required />
        <span asp-validation-for="Password" class="text-danger small"></span>
        <span class="invalid-feedback">Please enter your password</span>
      </div>
    <button type="submit" aria-label="Login" class="btn btn-primary btn-lg w-100 mb-3 d-flex justify-content-center align-items-center btn-submit">
  <span class="spinner-border me-3 d-none" role="status" aria-hidden="true"></span>
  <span>Login</span>
</button>

    </form>
    <hr/>

    <div class='text-center text-muted'>
    <p>Login with:</p>
    <a class="btn border-muted border border-2" asp-controller="Account" asp-action="GoogleLogin">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width=30 viewBox="0 0 48 48"><defs><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z"/><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/></svg> Google
    </a>
    </div>
    <hr/>


    <div class="small text-center">
      <span class="text-muted"> Don't have an account yet?</span>
      <a class="link text-center d-block" href="/register">Sign Up</a>
    </div>
  </div>


  <div
    class="alert alert-primary alert-dismissible fade show small mx-auto mt-3"
    role="alert"
    style="max-width: 500px"
  >
    <h5>Test accounts</h5>
    <div class="mb-2 border border-muted rounded p-2">
      <h6 class="mb-1">Admin</h6>
      <div>
        <span class="text-muted">Email:</span>
        <span>admin@forage.com </span>
      </div>
      <div>
        <span class="text-muted">Password:</span>
        <span>ForageAdmin123!</span>
      </div>
    </div>

    <div class="mb-2 border border-muted rounded p-2">
      <h6 class="mb-1">Business</h6>
      <div>
        <span class="text-muted">Email:</span>
        <span>business@forage.com </span>
      </div>
      <div>
        <span class="text-muted">Password:</span>
        <span>ForageBusiness123!</span>
      </div>
    </div>

    <div class="mb-2 border border-muted rounded p-2">
      <h6 class="mb-1">Basic</h6>
      <div>
        <span class="text-muted">Email:</span>
        <span>basic@forage.com </span>
      </div>
      <div>
        <span class="text-muted">Password:</span>
        <span>ForageBasic123!</span>
      </div>
    </div>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>

</div>

<script>
(function () {
  const form = document.querySelector('.needs-validation');
  const spinner = form.querySelector('.spinner-border');

  form.addEventListener(
    'submit',
    (event) => {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      } else {
        spinner.classList.remove('d-none');
      }

      form.classList.add('was-validated');
    },
    false
  );
})();

</script>
